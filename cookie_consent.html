<!-- Cookie Consent Banner - f√ºge dies vor dem schlie√üenden </body> Tag ein -->

<!-- CSS f√ºr Cookie Banner -->
<style>
.cookie-consent {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--card);
  border-top: 2px solid var(--primary);
  padding: 20px;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, .4);
  z-index: 9999;
  display: none;
  animation: slideUp 0.4s ease-out;
}

.cookie-consent.show {
  display: block;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.cookie-content {
  max-width: 420px;
  margin: 0 auto;
}

.cookie-content p {
  margin: 0 0 12px;
  font-size: 13px;
  line-height: 1.5;
  color: var(--text);
}

.cookie-buttons {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.cookie-btn {
  padding: 10px 18px;
  border-radius: 12px;
  border: none;
  font-weight: 600;
  font-size: 13px;
  cursor: pointer;
  transition: all .2s;
  font-family: 'Inter', sans-serif;
}

.cookie-btn-accept {
  background: var(--primary);
  color: var(--on-primary);
  flex: 1;
  min-width: 120px;
}

.cookie-btn-accept:hover {
  background: var(--primary-hover);
  transform: translateY(-1px);
}

.cookie-btn-decline {
  background: var(--surface-1);
  color: var(--muted);
  border: 1px solid var(--stroke);
}

.cookie-btn-decline:hover {
  background: var(--surface-2);
  color: var(--text);
}

.cookie-link {
  color: var(--accent);
  text-decoration: none;
}

.cookie-link:hover {
  text-decoration: underline;
}

@media (max-width: 480px) {
  .cookie-consent {
    padding: 16px;
  }
  
  .cookie-buttons {
    flex-direction: column;
  }
  
  .cookie-btn {
    width: 100%;
  }
}
</style>

<!-- HTML f√ºr Cookie Banner -->
<div id="cookieConsent" class="cookie-consent">
  <div class="cookie-content">
    <p>
      üç™ Wir verwenden Cookies und √§hnliche Technologien (Google Analytics, Facebook Pixel), 
      um die Nutzung unserer Website zu analysieren und zu verbessern. 
      <a href="/datenschutz/" class="cookie-link">Mehr Infos</a>
    </p>
    <div class="cookie-buttons">
      <button class="cookie-btn cookie-btn-accept" onclick="acceptCookies()">
        Alle akzeptieren
      </button>
      <button class="cookie-btn cookie-btn-decline" onclick="declineCookies()">
        Nur notwendige
      </button>
    </div>
  </div>
</div>

<!-- JavaScript f√ºr Cookie-Verwaltung -->
<script>
(function() {
  // Pr√ºfen, ob bereits eine Auswahl getroffen wurde
  const consent = localStorage.getItem('cookie-consent');
  
  if (!consent) {
    // Zeige Banner nach kurzer Verz√∂gerung
    setTimeout(() => {
      document.getElementById('cookieConsent').classList.add('show');
    }, 1000);
  } else if (consent === 'accepted') {
    // Lade Tracking-Scripts nur wenn akzeptiert
    loadTrackingScripts();
  }
})();

function acceptCookies() {
  localStorage.setItem('cookie-consent', 'accepted');
  document.getElementById('cookieConsent').classList.remove('show');
  loadTrackingScripts();
}

function declineCookies() {
  localStorage.setItem('cookie-consent', 'declined');
  document.getElementById('cookieConsent').classList.remove('show');
  // Keine Tracking-Scripts laden
}

function loadTrackingScripts() {
  // Facebook Pixel laden
  if (typeof fbq === 'undefined') {
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', 'DEINE_FACEBOOK_PIXEL_ID'); // TODO: Ersetzen!
    fbq('track', 'PageView');
  }
  
  // Google Analytics laden
  if (!window.gtag) {
    const script = document.createElement('script');
    script.async = true;
    script.src = 'https://www.googletagmanager.com/gtag/js?id=G-DEINE_MEASUREMENT_ID'; // TODO: Ersetzen!
    document.head.appendChild(script);
    
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-DEINE_MEASUREMENT_ID'); // TODO: Ersetzen!
  }
}
</script>